@using Microsoft.AspNetCore.SignalR.Client
@using System.Threading.Tasks
@using System.Net.Http
@page "/Admin/People"
@inject HttpClient Http

<h1>People Administration</h1>

<p>
    This is the pepole list, where you'll maintain the people who do chores.
</p>

<table class="table">
    <thead class="thead-dark">
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Phone</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var person in People)
        {
        <tr>
            <th scope="row">@person.Name</th>
            <td>@person.Phone</td>
        </tr>
        }
    </tbody>
</table>


@code {
    private string _functionUrl = "https://chores-iot.azurewebsites.net/api/getChores";

    public List<Assignee> People { get; set; } = new List<Assignee>();

    protected override async Task OnInitializedAsync()
    {
        var result = await Http.GetFromJsonAsync<ChoreListData>(_functionUrl);

        People = result.Assignees;

        StateHasChanged();
    }
}
